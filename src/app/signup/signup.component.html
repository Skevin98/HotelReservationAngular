<br>
<br>

<h1 class="mx-2" *ngIf="!isUpdate; else updateTitle; ">Créer un compte</h1>

<ng-template #updateTitle>
  <h1 class="mx-2">Modifier les informations personnels</h1>
</ng-template>


<br>
<br>

<div>
  <label class="lead mx-2">Veuillez entrer les informations requises : <span style="color:red">(*) Champs Obligatoires</span></label>
</div>

<br>
<br>

<form class="needs-validation" (ngSubmit)="onSubmit()"  [formGroup]="validationForm" novalidate>

  <input type="text" name="id" id="id" formControlName="id" hidden="true" >

  <!-- last name input -->
  <mdb-form-control class="mx-2">
    <input formControlName="nom"
    mdbValidate
    required
    mdbInput
    type="text"
    id="nom"
    class="form-control"
    name="nom"/>
    <label mdbLabel class="form-label" for="nom">Nom*</label>
    <mdb-error
    *ngIf="nom?.invalid && (nom?.dirty || nom?.touched)" >
      Champ obligatoire.
    </mdb-error>

  </mdb-form-control>

  <br>
  <br>

  <!-- first name input -->
  <mdb-form-control class="mx-2">
    <input
    formControlName="prenom"
    mdbInput
    type="text"
    id="prenom"
    class="form-control"
    name="prenom"/>
    <label mdbLabel class="form-label" for="prenom">Prénom</label>

  </mdb-form-control>

  <br>
  <br>

  <!-- username input -->
  <mdb-form-control class="mx-2">
    <input
    formControlName="username"
    mdbValidate
    required
    mdbInput
    type="text"
    id="username"
    class="form-control"
    name="username"/>
    <label mdbLabel class="form-label" for="username">Nom d'utilisateur*</label>
    <mdb-error
    *ngIf="username?.invalid && (username?.dirty || username?.touched)" >
      Champ obligatoire.
    </mdb-error>
  </mdb-form-control>

  <br>
  <br>

  <!-- age input -->
  <mdb-form-control class="mx-2">
    <input
    formControlName="age"
    mdbValidate
    mdbInput
    type="number"
    min="0"
    value="5"
    id="age"
    class="form-control"
    name="age"
    required  />
    <label mdbLabel class="form-label" for="age">Age*</label>
    <mdb-error
    *ngIf="age?.invalid && (age?.dirty || age?.touched)" >
      Vous devez etre majeur.
    </mdb-error>
  </mdb-form-control>

  <br>
  <br>




  <fieldset>
    <p class="text-muted mx-2">Sexe</p>
    <div class="form-check mx-2">
      <input
        formControlName="sexe"
        mdbRadio
        class="form-check-input"
        type="radio"
        name="sexe"
        id="radio_masc"
        value="Masculin"
        [checked]="validationForm.get('sexe')!.value==='Masculin'"
      />
      <label class="form-check-label" for="radio_masc"> Masculin </label>
    </div>
    <div class="form-check mx-2">
      <input
        mdbRadio
        formControlName="sexe"
        class="form-check-input"
        type="radio"
        name="sexe"
        id="radio_fem"
        value="Feminin"
        [checked]="validationForm.get('sexe')!.value==='Feminin'"

      />
      <label class="form-check-label" for="radio_fem"> Féminin </label>
    </div>

    <div class="form-check mx-2">
      <input
        mdbRadio
        formControlName="sexe"
        class="form-check-input"
        type="radio"
        name="sexe"
        id="radio_none"
        [checked]="validationForm.get('sexe')!.value===null"
        value="Non spécifié"
      />
      <label class="form-check-label" for="radio_none"> Ne pas spécifier </label>
    </div>
  </fieldset>



  <br>
  <br>


  <!-- address input -->
  <mdb-form-control class="mx-2">
    <input
    formControlName="adresse"
    mdbInput
    type="text"
    id="adresse"
    class="form-control"
    name="adresse"  />
    <label mdbLabel class="form-label" for="adresse">Adresse</label>
  </mdb-form-control>

  <br>
  <br>

  <!-- Email input -->
  <mdb-form-control class="mx-2">
    <input
    formControlName="email"
    mdbInput
    mdbValidate
    type="email"
    id="email"
    class="form-control"
    required
    name="email"/>
    <label mdbLabel class="form-label" for="email">Email*</label>
    <mdb-error
    *ngIf="email?.invalid && (email?.dirty || email?.touched)" >
      Email invalide.
    </mdb-error>
  </mdb-form-control>

  <br>
  <br>

  <!-- tel input -->
  <mdb-form-control class="mx-2">
    <input
    formControlName="telephone"
    mdbInput type="tel" id="telephone" class="form-control" required name="telephone"/>
    <label mdbLabel class="form-label" for="telephone">Téléphone</label>
  </mdb-form-control>


  <br>
  <br>

  <!-- Password input -->
  <mdb-form-control class="mx-2">
    <input
    formControlName="password"
    mdbValidate
    mdbInput
    type="password"
    id="password"
    class="form-control"
    required

    name="password" />
    <label mdbLabel class="form-label" for="password">Mot de passe*</label>
    <mdb-error
    *ngIf="password?.invalid && (password?.dirty || password?.touched)" >
      Mot de passe invalide. Votre mot de passe doit contenir au moins 8 caractères dont 1 lettre.
    </mdb-error>
  </mdb-form-control>

  <br>
  <br>


  <!-- Password input -->
  <mdb-form-control class="mx-2">
    <input
    formControlName="passConfirm"
    mdbInput
    type="password"
    id="passConfirm"
    class="form-control"
    required

    name="passConfirm"  />
    <label mdbLabel class="form-label" for="passConfirm">Confirmer le mot de passe*</label>


    <mdb-error
    *ngIf="validationForm.errors && (passConfirm?.dirty || passConfirm?.touched)" >
    Les mots de passes ne correspondent pas.
    </mdb-error>
  </mdb-form-control>

  <br>
  <br>


  <!-- 2 column grid layout for inline styling -->
  <div>
    <div class="d-flex flex-column justify-content-between">
      <!-- Checkbox -->
      <div class="form-check mx-2" >
        <input mdbCheckbox
        class="form-check-input"
        type="checkbox"
        value=""
        name="rappel"
        id="rappel" />
        <label
        class="form-check-label"
        for="rappel"> Se rappeler de moi </label>
      </div>

      <div class="form-check mx-2">
        <input mdbCheckbox
        class="form-check-input"
        type="checkbox"
        value=""
        name="newlestter"
        id="newlestter" />
        <label
        class="form-check-label"
        for="newlestter"> S'abonner à la newlestter </label>
      </div>



      <div class="form-check mx-2">
        <input mdbCheckbox
        formControlName="security"
        mdbValidate
        class="form-check-input"
        type="checkbox"
        name="security"
        id="security" required />
        <label
        class="form-check-label"
        for="security"> J'accepte la politique de sécurité </label>
        <mdb-error
        *ngIf="security?.invalid && (security?.dirty || security?.touched)" >
        Vous devez accepter la politique de sécurité.
    </mdb-error>
      </div>
    </div>

  </div>

  <br>
  <br>



  <br>



  <!-- Submit button -->
  <button *ngIf="!isUpdate; else updateButton;" type="submit" [disabled]="validationForm.invalid" class="btn btn-secondary mx-2 mb-1">Créer un compte</button>

  <ng-template #updateButton>
    <button type="submit" [disabled]="validationForm.invalid" class="btn btn-secondary mx-2 mb-1">Valider</button>
  </ng-template>

</form>

